%===============================================================================
\AufgabenHeader
%===============================================================================

%-------------------------------------------------------------------------------
\aufgabe{Kontakt zur Außenwelt}
%-------------------------------------------------------------------------------
\teilaufgabe
Ähnlich wie bei Software kann die Hardware eines IoT-Systems auf unterschiedlichen
Abstraktionsniveaus entworfen werden. Welche vier Arten von Hardwarebausteinen
wurden hierfür in den Folien vorgestellt? Benennen Sie diese und überlegen Sie
sich zu jeder Kategorie zwei Vor- und Nachteile.

\bigskip
\teilaufgabe
Das folgende Bild zeigt einen Raspberry Pi von oben. Beschriften Sie das Bild mit
den für gängige IoT-Anwendungen relevanten Schnittstellentechnologien.

\begin{center}
    \includegraphics[width=.5\textwidth]{2-hardwaredesign/img/rasbperrypi_foto}
\end{center}

\bigskip
\teilaufgabe
Welche Signalarten liegen am J8-Header des Raspberry Pi an? Zählen Sie alle sieben,
in den Folien genannten Signalarten auf.

%-------------------------------------------------------------------------------
\aufgabe{Elektronik-Grundlagen}
%-------------------------------------------------------------------------------
\teilaufgabe
Innerhalb eines elektrischen Generators entsteht Strom, indem sich ein Magnet um
eine Drahtspule dreht. Das zugrunde liegende Prinzip nennt sich elektromagnetische
Induktion. Erklären Sie anhand folgender Abbildung, wie durch das sich stets
verändernde Magnetfeld ein Stromfluss erzeugt wird. Gehen Sie dabei auch kurz
auf die Bestandteile des bohrschen Atommodells ein, indem Sie die Grafik
entsprechend beschriften.

\begin{center}
    \includegraphics[width=.75\textwidth]{2-hardwaredesign/img/atom_elektronenfluss}
\end{center}

\bigskip
\teilaufgabe
Wann spricht man von einem Potential (auch Ladung) genannt und wann von einer
Spannung? Erklären Sie kurz, wie die beiden Begriffe zusammenhängen.

\bigskip
\teilaufgabe
Neben der Spannung sind Stromstärke, Widerstand und Leistung drei weitere
wichtige Größen der Elektrotechnik. In welchen Einheiten werden sie gemessen
und was drücken sie jeweils aus? Füllen Sie hierzu stichwortartig die folgende
Tabelle aus.

{
    \renewcommand{\arraystretch}{1.8}
    \medskip

    \begin{tabular}{|p{.15\textwidth}|p{.15\textwidth}|p{.7\textwidth}|}
        \hline
        \textbf{Kenngröße} & \textbf{Einheit} & \textbf{Bedeutung} \\
        \hline
        Spannung           &                  &                    \\[3em]
        \hline
        Stromstärke        &                  &                    \\[3em]
        \hline
        Leistung           &                  &                    \\[3em]
        \hline
        Widerstand         &                  &                    \\[3em]
        \hline
    \end{tabular}

    \medskip
}

\bigskip
\teilaufgabe
Die folgenden zwei Abbildungen zeigen, wie Spannung, Stromstärke, Widerstand
und Leistung in Zusammenhang stehen. Welche Größen werden durch die jeweiligen
Formelzeichen beschrieben und wie lauten die Formeln hinter den Abbildungen?

\begin{center}
    \includegraphics[width=3cm]{2-hardwaredesign/img/formel_uri}
    \hskip 3em
    \includegraphics[width=3cm]{2-hardwaredesign/img/formel_pui}
\end{center}

\bigskip
\teilaufgabe
Berechnen Sie die gesuchten Werte für Widerstand, Stromstärke und Leistung in den
folgenden Anwendungsfällen:

\begin{enumerate}
    \item Die Spannung eines Ausgangspins am Rasbperry Pi beträgt 3,3\,V. Eine
    daran angeschlossene Leuchtdiode soll mit 2\,V und 5\,mA betrieben werden.
    Welcher Widerstand wird hierfür benötigt?

    \item Ein Eingangspan des Raspberry Pi wird über einen 1k\,\si{\ohm} Widerstand
    mit einer 3,3\,V Spannungsquelle verbunden. Welche Stromstärke liegt demnach
    am Raspberry Pi an?

    \item Ein typisches Netzteil für den Raspberry Pi funktioniert als
    Festspannungsnetzteil und liefert maximal 2\,A Strom bei 5\,V Spannung.
    Wie viel Watt verbraucht das Netzteil unter Volllast?
\end{enumerate}

%-------------------------------------------------------------------------------
\aufgabe{Spannungs- und Stromteiler}
%-------------------------------------------------------------------------------
\teilaufgabe
Gegeben sei eine einfache Schaltung mit drei in Reihe geschalteten Verbrauchern
und einem Steckernetzteil als Spannungsquelle. Angenommen das Netzteil liefert
12\,V Spannung und die Verbraucher haben die Widerstände 910\,\si{\ohm}, 750\,\si{\ohm}
und 3k\,\si{\ohm}.

\begin{enumerate}
    \item Welche Teilspannungen fallen an den einzelnen Verbrauchern ab?
    \item Wie hoch ist der Strom, der durch die Schaltung fließt?
    \item Wie viele Kilowattstunden fallen an, wenn die Schaltung ein Jahr lang läuft?
\end{enumerate}

%\bigskip
\teilaufgabe
Angenommen, die oben genannten Verbraucher wären nicht in Reihe sondern parallel
geschaltet.

\begin{enumerate}
    \item Wie hoch ist der Gesamtwiderstand der Schaltung?
    \item Welcher Gesamtstrom fließt somit durch die Schaltung?
    \item Wie teilt sich der Gesamtstrom an den Verbrauchern auf?
\end{enumerate}

%-------------------------------------------------------------------------------
\aufgabe{Digitale Komponenten verbinden}
%-------------------------------------------------------------------------------
%\teilaufgabe
%Im letzten Aufgabenblatt haben wir integrierte Schaltkreise mit \glqq{}Chip Enable\grqq{}
%genannten Eingängen gesehen. Die anderen Ein- und Ausgänge der Bausteine müssen
%daher so genannte \glqq{}Tri-States\grqq{} sein. Recherchieren Sie den Begriff
%Tri-State und erklären Sie mit wenigen Worten, was damit gemeint ist und warum die
%kennengelernte Schaltung ohne Tri-States nicht funktionieren würde.

\bigskip
\teilaufgabe
In den Folien wurde mit einem einfachen Spannungsteiler ein 5\,V-Sensorsignal
auf für den Raspberry Pi verträgliche 3,3\,V herunter geregelt. Für solche
Aufgaben wird allerdings eher selten ein Spannungsteiler verwendet, da er ein
paar entscheidende Nachteile besitzt:

\begin{enumerate}
    \item Die Schaltung verbraucht vergleichsweise viel Strom, der als überschüssige
    Energie in Wärme umgesetzt wird.

    \item Das Schaltsignal wird durch die Schaltung zeitlich verschmiert, so dass
    nur eine begrenzte Datenrate übertragen werden kann.
\end{enumerate}

Entwerfen Sie daher eine Schaltung, die anstelle eines Spannungsteilers einen
Transistor nutzt, um den Eingangspin des Raspberry Pi mit 3,3\,V anzusteuern.
Beachten Sie dabei, dass sich bei den hier betrachteten NPN-Transistoren die
Stromstärke am Emitter (dem Ausgang des Transistors) aufsummiert. Bauen Sie
deshalb an beiden Eingängen des Transistors entsprechende Vorwiderstände ein,
um die Gesamtstromstärke auf 2\,mA zu begrenzen.

\bigskip
\teilaufgabe
Wozu werden in einer digitalen Schaltung Pull-Up- oder Pull-Down-Widerstände
genutzt. Erklären Sie kurz und ohne auf Details zur Berechnung einzugehen, wie
die Widerstände verschaltet sind und welche Aufgabe sie erfüllen.

\bigskip
\teilaufgabe
In einer Alarmanlage soll eine LED unterschiedlich schnell blinken, je nachdem
ob die Alarmanlage scharf geschaltet ist oder nicht. Im ausgeschalteten Zustand
soll die LED immer eine Sekunde lang an und eine halbe Sekunde lang aus sein.
Eingeschaltet soll sie jeweils nur eine halbe Sekunde lang an und aus sein.
Mit welchen Parametern müsste ein pulsweitenmodulierter Ausgang des Raspberry
Pi konfiguriert werden, um diese Zeitintervalle zu erreichen?

%-------------------------------------------------------------------------------
\aufgabe{Serielle Datenübertragung}
%-------------------------------------------------------------------------------
\teilaufgabe
Die Kommunikation innerhalb eines eingebetteten Systems erfolgt oftmals über
serielle Schnittstellen. Und wie nicht anders zu erwarten, haben unterschiedliche
Hersteller unterschiedliche, zueinander inkompatible Standards hierfür geschaffen.
Recherchieren Sie im Internet und füllen Sie die nachfolgende Tabelle mit den
Eigenschaften der wichtigsten vier Standards aus:

\newcommand{\SerialVergleich}[1]{
    {
        \renewcommand{\arraystretch}{1.8}
        \newcolumntype{Y}{>{\centering\arraybackslash}X}
        \newcolumntype{R}{>{\raggedleft\arraybackslash}p}
        \newcolumntype{L}{>{\raggedright\arraybackslash}X}
        \vskip \LTpre

        \begin{tabularx}{\textwidth}{|R{.33\textwidth}|L|L|L|L|}
            \hline
            &
            \textbf{UART}    &
            \textbf{SPI}     &
            \textbf{I²C}     &
            \textbf{1-wire}
            \\

            \hline
            \textbf{Synchron / Asynchron} &
            \loesungswert{#1}{Asynchron} &                      % URART
            \loesungswert{#1}{Synchron} &                       % SPI
            \loesungswert{#1}{Synchron} &                       % I²C
            \loesungswert{#1}{Asynchron}                        % 1-wire
            \\[2em]

            \hline
            \textbf{Full-Duplex / Half-Duplex} &
            \loesungswert{#1}{Full-Duplex} &                    % URART
            \loesungswert{#1}{Full-Duplex} &                    % SPI
            \loesungswert{#1}{Half-Duplex} &                    % I²C
            \loesungswert{#1}{Half-Duplex}                      % 1-wire
            \\[2em]

            \hline
            \textbf{Mehrere Empfänger möglich} &
            \loesungswert{#1}{Nein} &                           % URART
            \loesungswert{#1}{Ja} &                             % SPI
            \loesungswert{#1}{Ja} &                             % I²C
            \loesungswert{#1}{Ja}                               % 1-wire
            \\[2em]

            \hline
            \textbf{Mehrere Sender möglich} &
            \loesungswert{#1}{Nein} &                           % URART
            \loesungswert{#1}{Ja} &                             % SPI
            \loesungswert{#1}{Nein} &                           % I²C
            \loesungswert{#1}{Ja}                               % 1-wire
            \\[2em]

            \hline
            \textbf{Adressierung der Empfänger} &
            \loesungswert{#1}{Keine} &                          % URART
            \loesungswert{#1}{Slave-Select-Leitung} &           % SPI
            \loesungswert{#1}{Adresse im Datenstrom} &          % I²C
            \loesungswert{#1}{Adresse im Datenstrom}            % 1-wire
            \\[2em]

            \hline
        \end{tabularx}

        \vskip \LTpost
    }
}
\SerialVergleich{}

{
    \small

    \begin{longtable}{p{0.3\textwidth}p{0.7\textwidth}}
        \textbf{Synchron / Asynchron:}          &  Gibt es ein Zeitsignal zur Synchronisation der Datenübertragung? \\
        \textbf{Full-Duplex / Half-Duplex:}     &  Kann ein Bauteil gleichzeitig Daten senden und empfangen? \\
        \textbf{Mehrere Empfänger möglich:}     &  Kann ein Sender gleichzeitig mehrere Empfänger ansprechen? \\
        \textbf{Mehrere Sender möglich:}        &  Kann ein Bauteil von mehreren Sendern Daten empfangen? \\
        \textbf{Adressierung der Empfänger:}    &  Wie wird ein Bauteil zum Empfang der Daten aufgefordert? \\
    \end{longtable}
}

\bigskip
\teilaufgabe
Ein über SPI angebundener Temperatursensor sendet immer genau zwei Bytes für
einen Temperaturwert. Das erste Byte entspricht dabei der Temperatur in Grad
Celsius ohne Nachkommastellen, das zweite Byte liefert die Zahl hinter dem Komma.
Zeichnen Sie ein Timingdiagramm, aus dem der zeitliche Ablauf aller Signale
hervorgeht, wenn der Sensor den Wert 28.3 liefert.

%-------------------------------------------------------------------------------
\aufgabe{Praktische Übung}
%-------------------------------------------------------------------------------
\teilaufgabe
Die folgenden Aufgaben können direkt auf dem Raspberry Pi unter der grafischen
Desktopumgebung von Raspbian ausgeführt werden. Starten Sie daher den Rasperry
Pi und stellen Sie zunächst eine Internetverbindung her. Anschließend laden
Sie von Moodle die ZIP-Datei mit den Quellcodes dieses Kapitels herunter und
legen diese im Home-Verzeichnis des Pi ab. Danach öffnen Sie eine Kommandozeile
und führen folgenden Befehl zum Entpacken der Quellcodes aus:

\newcommand*{\CommandPrompt}[1]{\textcolor{gray}{#1}}

{
    \medskip
    \tt
    \setstretch{1.0}
    \CommandPrompt{\~{}\$} unzip Grundschaltungen.zip
    \medskip
}

Mit folgenden Befehlen können Sie dann ein neues Python Environment einrichten
und alle benötigten Zusatzbibliotheken installieren:

{
    \medskip
    \tt
    \setstretch{1.0}
    \CommandPrompt{\~{}\$} cd Grundschaltungen \\
    \CommandPrompt{\~{}/Grundschaltungen/\$} chmod +x install.sh \\
    \CommandPrompt{\~{}/Grundschaltungen/\$} ./install.sh
    \medskip
}

Zum Test können führen Sie das Beispiel \texttt{led\_blink} aus. Wenn alles gut
geht, sollten folgende Zeilen auf dem Bildschirm erscheinen:

{
    \medskip
    \tt
    \setstretch{1.0}
    \CommandPrompt{\~{}/Grundschaltungen/\$} . env/bin/activate \\
    \CommandPrompt{(env) \~{}/Grundschaltungen/\$} ./src/led\_blink.py \\
    LED ist an \\
    LED ist aus \\
    \\
    LED ist an \\
    LED ist aus \\
    \^{}C
    \medskip
}

Mit \texttt{Strg}+\texttt{C} können Sie das Programm beenden.

\bigskip
\teilaufgabe
Bauen Sie nun folgende Schaltungen aus den Folien nach und testen Sie sie mit
den entsprechenden Beispielprogrammen. Beachten Sie dabei, dass die Beispiele
immer aus der Kommandozeile heraus gestartet werden müssen und dass hierfür
wie oben gezeigt das dazugehörige Python-Environment aktiviert sein muss.

\bigskip

\begin{tabularx}{\textwidth}{|X|X|X|}
    \hline
    \textbf{Schaltung} & \textbf{Quellcodebeispiel} \\

    \hline
    LED über Widerstand direkt ansteuern &
    \verb|./src/led_blink.py| \\

    \hline
    Große Lasten über Relais schalten &
    \verb|./src/led_blink.py| \\

    \hline
    Gemittelte Leistung durch PWM regulieren &
    \verb|./src/led_pwm.py| \\
    &
    \verb|./src/led_pwm_blink.py| \\
    &
    \verb|./src/led_pwm_fade.py| \\

    \hline
    Schließkontakt mit Pull-Down-Widerstand &
    \verb|./src/button_pulldown_external.py| \\

    \hline
    Schließkontakt mit Pull-Up-Widerstand &
    \verb|./src/button_pullup_external.py| \\

    \hline
    DHT11-Sensor über 1-wire &
    \verb|./src/dht11.py| \\

    \hline
\end{tabularx}


%===============================================================================
\clearpage
\LoesungHeader
%===============================================================================

%-------------------------------------------------------------------------------
\loesung{Kontakt zur Außenwelt}
%-------------------------------------------------------------------------------
\teilaufgabe
Die vier Abstraktionsebenen im Hardwaredesign, jeweils mit zwei Vor- und
Nachteilen:

\begin{enumerate}
    %%
    \item \textbf{Elementare Bauteile} \\
    Widerstände, Transistoren, Dioden, Relais, Leuchtdioden, Taster, Schalter, ...

    {
        \small
        Vorteile:

        \begin{compactitem}
            \item Exakt auf den Anwendungsfall zugeschnittene Schaltungen realisierbar
            \item Minimale Kosten durch minimale Anzahl an Zusatzkomponenten
        \end{compactitem}

        Nachteile:

        \begin{compactitem}
            \item Hardwaredesign und Interfacing vergleichsweise aufwändig
            \item Fertigung dauerhaft einsetzbarer Schaltungen ebenfalls aufwändig
        \end{compactitem}
    }

    \smallskip

    %%
    \item \textbf{Integrierte Schaltkreise} \\
    Mikrocontroller, Speicherbausteine, Logikbausteine, Level Shifter, ...

        {
        \small
        Vorteile:

        \begin{compactitem}
            \item Deutliche Miniaturisierung und Vereinfachung komplexer Schaltungen
            \item Einfacheres Hardwaredesign dank vieler verfügbarer Standardkomponenten
        \end{compactitem}

        Nachteile:

        \begin{compactitem}
            \item Extrem große Auswahl und daher aufwändige Recherchen erforderlich
            \item Immer weniger DIL-Komponenten, die sich einfach verlöten lassen
        \end{compactitem}
    }

    \smallskip

    %%
    \item \textbf{Vorgefertigte Baugruppen} \\
    RFID-Leser, Kameramodule, LCD-Displays, Sensormodule, Folientastaturen, ...

    {
        \small
        Vorteile:

        \begin{compactitem}
            \item Baukastenprinzip zur Realisierung komplexer Hardwaredesigns
            \item Interfacing daher bereits mit sehr einfachen Schaltungen möglich
        \end{compactitem}

        Nachteile:

        \begin{compactitem}
            \item Vergleichsweise hohe Kosten gegenüber den zugrunde liegenden Bauteilen
            \item Komponenten unterschiedlicher Hersteller oft inkompatibel zueinander
        \end{compactitem}
    }

    \smallskip

    %%
    \item \textbf{Modulare Geräte} \\
    IP-Kameras, USB-Lautsprecher, Industriesteuergeräte, ZigBee-Komponenten, ...

        {
        \small
        Vorteile:

        \begin{compactitem}
            \item So gut wie keine Hardwarekenntnisse erforderlich
            \item Nutzung von Off-the-Shelve PC-Komponenten möglich
        \end{compactitem}

        Nachteile:

        \begin{compactitem}
            \item Sehr viel teurer als alle anderen Varianten
            \item Deutlich höhere Gesamtkomplexität des Systems
        \end{compactitem}
    }
\end{enumerate}

\clearpage
\teilaufgabe
Beschriftung der Hardwareschnittstellen des Raspberry Pi:

\begin{center}
    \includegraphics[width=.5\textwidth]{2-hardwaredesign/img/raspberry_anschluesse}
\end{center}

\begin{tabularx}{\textwidth}{XX}
        1. Mini-USB-Stromversorgung     &   5. HDMI-Bildschirmanschluss     \\
        2. J8 GPIO-Header               &   6. LAN-Netzwerkanschluss        \\
        3. Display Serial Interface     &   7. USB-Anschlüsse               \\
        4. Camera Serial Interface      &   8. WiFi, Bluetooth              \\
\end{tabularx}

\bigskip
\teilaufgabe
Signalarten am J8-Header des Raspberry Pi:

\medskip

\begin{tabularx}{\textwidth}{XX}
    \textbf{Stromversorgung:}   &   \textbf{Digital Ein-/Ausgänge:}     \\
    5\,V Power                  &   GPIO                                \\
    3.3\,V Power                &   Pulsweitenmodulation                \\
    Ground (Masse)              &   Asynchron serielle Schnittstellen   \\
                                &   Synchron serielle Schnittstellen    \\
\end{tabularx}

%-------------------------------------------------------------------------------
\loesung{Elektronik-Grundlagen}
%-------------------------------------------------------------------------------
\teilaufgabe
In der Abbildung gezeigte Bestandteile des bohrschen Atommodells:

\smallskip
\includegraphics[width=.5cm]{2-hardwaredesign/img/atom_kern}      Atomkern  \hskip 2em
\includegraphics[width=.5cm]{2-hardwaredesign/img/atom_schale}    Schale    \hskip 2em
\includegraphics[width=.5cm]{2-hardwaredesign/img/atom_elektron}  Elektron  \hskip 2em
\includegraphics[width=.5cm]{2-hardwaredesign/img/atom_proton}    Proton    \hskip 2em
\includegraphics[width=.5cm]{2-hardwaredesign/img/atom_neutron}   Neutron

Laut dem bohrschen Atommodell besteht ein Atom aus einem Kern mit positiv geladenen
Protonen und neutralen Neutronen, um den in mehreren Bahnen (auch Schalen genannt)
negativ geladene Neutronen kreisen. Im Normalzustand besitzt das Atom dabei genauso
viele Elektronen wie Protonen. Die durch das sich drehende, magnetische Feld erzeugte
Lorentzkraft versetzt die Elektronen der äußeren Bahn (die sogenannten Valenzelektronen)
in Bewegung und sorgt so dafür, dass sie auf benachbarte Atome überspringen. Die Richtung
wird dabei durch die Bewegung des Magnetfelds vorgegeben, so dass dadurch eine gerichtete
Bewegung der Elektronen durch das leitende Material und somit ein Stromfluss entstehen.

\bigskip
\teilaufgabe
Potential oder Ladung bezeichnen den atomaren Zustand des Elektronenüberschusses
oder Elektronenmangels. Da Elektronen per Definition negativ geladen sind, besitzt
ein Atom mit zu wenigen Elektronen eine positive Ladung, da es mehr positive als
negative Ladungsträger besitzt. Umgekehrt besitzt ein Atom mit mehr Elektronen als
Protonen eine negative Ladung. Die dazugehörige Maßeinheit nennt sich Coulumb.

Die Ladung oder das Potential werden immer an einem Punkt gemessen und beziehen
sich auf den Normalzustand, indem ein Atom genauso viele Elektronen wie Protonen
besitzt und somit elektrisch neutral ist. Eine Spannung wird hingegen immer zwischen
zwei Punkten gemessen, da es sich dabei um die Ladungsdifferenz zwischen den beiden
Punkten handelt. Diese Ladungsdifferenz ist die Voraussetzung dafür, dass Strom
fließen kann, wenn die beiden Punkte über ein leitfähiges Material verbunden werden.


\bigskip
\teilaufgabe
Wichtige Bezugsgrößen der Elektrotechnik:

{
    \renewcommand{\arraystretch}{1.8}
    \medskip

    \begin{tabular}{|p{.15\textwidth}|p{.15\textwidth}|p{.7\textwidth}|}
        \hline
        \textbf{Kenngröße} &
        \textbf{Einheit}   &
        \textbf{Bedeutung} \\

        \hline
        Spannung &
        Volt &
        Beschreibt die Ladungsdifferenz zwischen zwei Punkten, vergleichbar mit
        dem Druck, den eine Pumpe auf das Wasser in einem Wasserschlauch ausübt.
        \\

        \hline
        Stromstärke &
        Ampere &
        Beschreibt wie viele Elektronen in einer gegebenen Zeit fließen, vergleichbar
        mit der Menge und Geschwindigkeit, mit der Wasser durch einen Schlauch fließt.
        \\

        \hline
        Leistung &
        Watt &
        Beschreibt die in einer Zeiteinheit verrichtete Arbeit bzw. umgesetzte Energie.
        Da der Zeitquotient bereits in der Formel für die Stromstärke enthalten ist,
        kann die Leistung einfach als Produkt aus Spannung und Strom berechnet werden.
        \\

        \hline
        Widerstand &
        Ohm &
        Ein Widerstand hindert die Bewegung der Elektronen und legt somit bei
        gegebener Spannung die erzielte Stromstärke fest. Hierfür setzt er einen
        Teil des Stroms in thermische Energie um und \glqq{}vernichtet\grqq{}
        ihn sozusagen.
        \\

        \hline
    \end{tabular}

    \medskip
}

\bigskip
\teilaufgabe
Formelzeichen für die wichtigsten Berechnungen:

U = Spannung
\hskip 2em
I = Stromstärke
\hskip 2em
R = Widerstand
\hskip 2em
P = Leistung

Dazugehörige Formeln:

$U = R / I$
\hskip 2em
$R = U / I$
\hskip 2em
$I = U / R$
\hskip 6em
$P = U * I$
\hskip 2em
$U = P / I$
\hskip 2em
$I = P / U$

\bigskip
\teilaufgabe
Berechnung von Widerstand, Stromstärke und Leistung:

\begin{enumerate}
    %%
    \item Da der Raspberry Pi 3,3\,V liefert, die LED aber nur 2\,V verträgt,
    muss der gesuchte Widerstand die Differenz von 1,3\,V \glqq{}vernichten\grqq{}:

    $
        U_{Pi} = 3,3\,V \\
        U_{LED} = 2\,V \\
        \smallskip
        U_{Zuviel} = U_{Pi} - U_{LED} = 1,3\,V
    $

    Dieser Wert lässt sich nun mit der gewünschten Stromstärke von 5\,mA verwenden,
    um den Widerstandswert zu berechnen:

    $
        I_{LED} = 5\,mA \\
        \smallskip
        R = U_{Zuviel} / I_{LED} = 1,3\,V / 0,005\,A = 260\,\si{\ohm}
    $

    \textbf{Hinweis:} 260\,\si{\ohm} liegen genau zwischen den in der Widerstandsreihe
    E24 verfügbaren Widerständen 240\,\si{\ohm} und 270\,\si{\ohm}. In der Praxis
    würde man daher einfach den nächst höheren Widerstand von 270\,\si{\ohm} verwenden
    und prüfen, ob die LED auch mit dem etwas geringeren Strom arbeitet.

    %%
    \item Gemäß der Gleichung $I = U / R$ fließen $3,3\,V / 1000\,\si{\ohm} = 3,3\,mA$.

    %%
    \item Gemäß der Gleichung $P = U * I$ bestizt das Netzeil eine Leistung von
    $5\,V * 2\,A = 10\,W$.

    \textbf{Hinweis:} Läuft das Netzteil daher eine Stunde unter Vollast, entstehen
    dadurch 0,01\,kWh (Kilowattstunden) Stromkosten.
\end{enumerate}

%-------------------------------------------------------------------------------
\loesung{Spannungs- und Stromteiler}
%-------------------------------------------------------------------------------
\teilaufgabe
Spannungsteiler mit den Widerständen 910\,\si{\ohm}, 750\,\si{\ohm} und 3k\,\si{\ohm}:

\begin{enumerate}
    %%
    \item \textbf{Teilspannungen:}
    Die Spannung teilt sich im Verhältnis der Widerstände zueinander auf.

    $U_1 = \frac{12\,V * 910\,\si{\ohm}}{910\,\si{\ohm} \,+\, 750\,\si{\ohm} \,+\, 3000\,\si{\ohm}} \approx 2,34\,V$

    $U_2 = \frac{12\,V * 750\,\si{\ohm}}{910\,\si{\ohm} \,+\, 750\,\si{\ohm} \,+\, 3000\,\si{\ohm}} \approx 1,93\,V$

    $U_3 = \frac{12\,V * 3000\,\si{\ohm}}{910\,\si{\ohm} \,+\, 750\,\si{\ohm} \,+\, 3000\,\si{\ohm}} \approx 7,73\,V$

    Die Summe der Teilspannungen ergibt daher (ohne Rundungsfehler) exakt 12\,V:

    $2,34\,V + 1,93\,V + 7,73\,V = 12\,V$

    %%
    \item \textbf{Stromstärke:} Die Stromstärke teilt sich nicht auf, sondern ergibt sich
    aus der Eingangsspannung und dem Gesamtwiderstand der Schaltung.

    $I = \frac{12\,V}{910\,\si{\ohm} \,+\, 750\,\si{\ohm} \,+\, 3000\,\si{\ohm}} \approx 2,57\,mA$

    %%
    \item \textbf{Kilowattstunden nach einem Jahr}:
    Hierfür muss die Leistung in Watt ausgerechnet, durch Tausend geteilt und mit
    der Zeit multipliziert werden.

    $0,00257 \,*\, 12 \,/\, 1000 \,*\, 24 \,*\, 356 \approx 0,26\,kWh$
\end{enumerate}

%\bigskip
\teilaufgabe
Stromteiler mit den Widerständen 910\,\si{\ohm}, 750\,\si{\ohm} und 3k\,\si{\ohm}:

\begin{enumerate}
    %%
    \item \textbf{Gesamtwiderstand:} Der Kehrwert des Gesamtwiderstands entspricht
    der Summe der Kehrwerte der Teilwiderstände. Nach dem Gesamtwiderstand aufgelöst
    ergibt sich folgende Formel:

    $R_{Gesamt} = \frac{1}{1/910\,\si{\ohm} \,+\, 1/750\,\si{\ohm} \,+\, 1/3000\,\si{\ohm}} \approx 361,59\,\si{\ohm}$

    %%
    \item \textbf{Gesamtstrom:} Zusammen mit der Spannung lässt sich nun der Gesamtstrom
    ausrechnen.

    $I_{Gesamt} = \frac{12\,V}{361,59\,\si{\ohm}} \approx 33,18\,mA$

    %%
    \item \textbf{Teilströme:} Der Strom teilt sich im Verhältnis der Widerstände
    zueinander auf.

    $I_1 = \frac{33,18\,mA * 910\,\si{\ohm}}{910\,\si{\ohm} \,+\, 750\,\si{\ohm} \,+\, 3000\,\si{\ohm}} \approx 6,48\,mA$

    $I_2 = \frac{33,18\,mA * 750\,\si{\ohm}}{910\,\si{\ohm} \,+\, 750\,\si{\ohm} \,+\, 3000\,\si{\ohm}} \approx 5,34\,mA$

    $I_3 = \frac{33,18\,mA * 3000\,\si{\ohm}}{910\,\si{\ohm} \,+\, 750\,\si{\ohm} \,+\, 3000\,\si{\ohm}} \approx 21,36\,mA$

    Die Summe der Teilströme ergibt daher (ohne Rundungsfehler) 33,18\,mA:

    $6,48\,mA + 5,34\,mA + 21,36\,mA = 33,18\,mA$
\end{enumerate}

%-------------------------------------------------------------------------------
\loesung{Digitale Komponenten verbinden}
%-------------------------------------------------------------------------------
\teilaufgabe
Entwurf einer einfachen Transistorschaltung zur Schaltung von 3,3\,V in
Abhängigkeit von einem 5\,V Sensorausgang. Durch entsprechende Vorwiderstände
wird der Gesamtstrom am Transistorausgang auf 2\,mA begrenzt. Die zusätzlich
eingezeichneten Pull-Down-Widerstände verhindern ungewollte Schwankungen des
GPIO-Eingangsignals, indem zufällig auftretende Einstreuungen gegen Masse
abgeführt werden.

\includegraphics[width=\textwidth]{2-hardwaredesign/img/transistor_sensor_schaltplan}

\bigskip
\teilaufgabe
Pull-Up- und Pull-Down-Widerstände dienen dazu, zufällig auftretende Schwankungen
eines Eingangssignals durch eingestreute Störströme zu verhindern. Hierzu wird
der zu schützende Eingang über einen Widerstand entweder gegen Masse (Pull-Down)
oder gegen Spannung (Pull-Up) verbunden.

\bigskip
\teilaufgabe
Tastgrad (Duty Cycle) und Frequenz einer mit PWM zum Blinken gebrachten LED:

\begin{itemize}
    \item \textbf{1\,Sek an, 0,5\,Sek aus:}
    Frequenz: 2/3 Hz, Tastgrad: 66\%

    \item \textbf{0,5\,Sek an, 0,5\,Sek aus:}
    Frequenz: 1 Hz, Tastgrad: 50\%
\end{itemize}

\clearpage

%-------------------------------------------------------------------------------
\loesung{Serielle Datenübertragung}
%-------------------------------------------------------------------------------
\teilaufgabe
Vergleich der wichtigsten seriellen Übertragungsformate:

\SerialVergleich{X}

\bigskip
\teilaufgabe
Timingdiagramm zum Übertrag der Zahlen 28 und 3 via SPI:

\includegraphics[width=\textwidth]{2-hardwaredesign/img/spi_timingdiagramm}

{
    \small
    Der Microkontroller zieht die Slave-Select-Leitung auf Masse runter, um sie
    zu aktivieren (active-low). Gleichzeitig sendet er auf der Clock-Leitung eine
    stetige, sich abwechselnde Folge von High- und Low-Signalen zur Synchronisation.
    Je ein High gefolgt von einem Low bildet dabei einen Takt, während dem der
    Sensor ein Bit überträgt. Die erste Takthälfte dient dem Sensor dazu, die
    Datenleitung entsprechend zu setzen, damit der Mikrocontroller den Wert in
    der zweiten Takthälfte auslesen kann.
}

%-------------------------------------------------------------------------------
\loesung{Praktische Übung}
%-------------------------------------------------------------------------------
Hierfür gibt es keine Musterlösung. Passen Sie nur auf, dass nichts in die
Luft fliegt. \smiley
